{"version":3,"sources":["book/controllers/bookAppController.ts"],"names":["app","app.book","app.book.BookAppController","app.book.BookAppController.constructor"],"mappings":"AAAA,IAAO,GAAG,CAgDT;AAhDD,WAAO,GAAG;IAACA,IAAAA,IAAIA,CAgDdA;IAhDUA,WAAAA,IAAIA,EAACA,CAACA;QAEbC,YAAYA,CAACA;QAEbA,IAAMA,iBAAiBA;YAEnBC,SAFEA,iBAAiBA,CAGPA,SAA8BA,EAC9BA,SAA8BA,EAC9BA,UAAgCA,EACjCA,OAAYA,EACZA,WAA2CA,EAC1CA,MAA6BA,EAC7BA,eAA0CA,EAC3CA,KAAqCA;gBAVpDC,iBAyCCA;gBAtCeA,cAASA,GAATA,SAASA,CAAqBA;gBAC9BA,cAASA,GAATA,SAASA,CAAqBA;gBAC9BA,eAAUA,GAAVA,UAAUA,CAAsBA;gBACjCA,YAAOA,GAAPA,OAAOA,CAAKA;gBACZA,gBAAWA,GAAXA,WAAWA,CAAgCA;gBAC1CA,WAAMA,GAANA,MAAMA,CAAuBA;gBAC7BA,oBAAeA,GAAfA,eAAeA,CAA2BA;gBAC3CA,UAAKA,GAALA,KAAKA,CAAgCA;gBAkBzCA,eAAUA,GAAGA;oBAChBA,MAAMA,CAACA,KAAIA,CAACA,KAAKA,CAACA,GAAGA,EAAEA,CAACA;gBAC5BA,CAACA,CAAAA;gBAEMA,gBAAWA,GAAGA;oBACjBA,IAAIA,WAAWA,GAAGA,KAAIA,CAACA,WAAWA,CAACA,GAAGA,EAAEA,CAACA;oBAEzCA,EAAEA,CAACA,CAACA,WAAWA,CAACA;wBACZA,MAAMA,CAACA,WAAWA,CAACA,SAASA,GAAGA,GAAGA,GAAGA,WAAWA,CAACA,QAAQA,CAACA;oBAE9DA,MAAMA,CAACA,IAAIA,CAACA;gBAChBA,CAACA,CAAAA;gBA3BGA,OAAOA,CAACA,MAAMA,CAACA,MAAMA,CAACA,CAACA;gBAEvBA,SAASA,CAACA;oBACNA,EAAEA,CAACA,CAACA,eAAeA,CAACA,YAAYA,EAAEA,CAACA,CAACA,CAACA;wBAEjCA,AAMAA,iDANiDA;wBACjDA,wDAAwDA;wBACxDA,kCAAkCA;wBAClCA,GAAGA;wBAGHA,SAASA,CAACA,IAAIA,CAACA,QAAQA,CAACA,CAACA;oBAC7BA,CAACA;gBACLA,CAACA,EAAEA,IAAIA,CAACA,CAACA;YACbA,CAACA;YAeLD,wBAACA;QAADA,CAzCAD,AAyCCC,IAAAD;QAEDA,OAAOA,CAACA,MAAMA,CAACA,UAAUA,CAACA,CAACA,UAAUA,CAACA,mBAAmBA,EAAEA,CAACA,WAAWA,EAAEA,WAAWA,EAAEA,YAAYA,EAAEA,SAASA,EAAEA,aAAaA,EAAEA,QAAQA,EAAEA,iBAAiBA,EAAEA,OAAOA,EAAEA,iBAAiBA,CAACA,CAACA,CAACA;IAC5LA,CAACA,EAhDUD,IAAIA,GAAJA,QAAIA,KAAJA,QAAIA,QAgDdA;AAADA,CAACA,EAhDM,GAAG,KAAH,GAAG,QAgDT","file":"book/controllers/bookAppController.js","sourceRoot":"C:/Projects/ngBook/ngBook/","sourcesContent":["module app.book {\r\n\r\n    \"use strict\";\r\n\r\n    class BookAppController {\r\n\r\n        constructor(\r\n            private $interval: ng.IIntervalService,\r\n            private $location: ng.ILocationService,\r\n            private $rootScope: ng.IRootScopeService,\r\n            public $router: any,\r\n            public currentUser: common.ISessionStorageProperty,\r\n            private routes: common.IRouteConfig[],\r\n            private securityService: security.ISecurityService,\r\n            public token: common.ISessionStorageProperty) {\r\n\r\n            $router.config(routes);\r\n\r\n            $interval(() => {\r\n                if (securityService.tokenExpired()) {\r\n\r\n                    //if(this.currentRouteRequiresAuthentication()) {\r\n                    //  this.loginRedirect.lastPath = this.$location.path();\r\n                    //  this.$location.path('/login');\r\n                    //}\r\n\r\n\r\n                    $location.path(\"/login\");\r\n                }\r\n            }, 6000);\r\n        }\r\n\r\n        public isLoggedIn = () => {\r\n            return this.token.get();\r\n        }\r\n\r\n        public getUsername = () => {\r\n            var currentUser = this.currentUser.get();\r\n\r\n            if (currentUser)\r\n                return currentUser.firstname + ' ' + currentUser.lastname;\r\n\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n    angular.module(\"app.book\").controller(\"bookAppController\", [\"$interval\", \"$location\", \"$rootScope\", \"$router\", \"currentUser\", \"routes\", \"securityService\", \"token\", BookAppController]);\r\n} "]}